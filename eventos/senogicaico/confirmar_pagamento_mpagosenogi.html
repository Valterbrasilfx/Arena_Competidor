<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arena Competidor | Pagamento e Confirma√ß√£o</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
        :root { 
            --cor-primaria: #007bff; 
            --cor-secundaria: #343a40; 
            --cor-destaque: #28a745; 
            --cor-fundo: #f8f9fa; 
            --cor-texto: #495057; 
            --cor-borda: #dee2e6; 
            --cor-whatsapp: #25D366; 
            --cor-alerta: #ffc107; 
            --cor-sucesso: #d4edda;
            --cor-mpago: #009ee3; /* Cor do Mercado Pago */
            --cor-pix-direto: var(--cor-destaque);
            --cor-copia: #6c757d; /* Cinza para bot√£o de Copiar */
        } 
        body { font-family: 'Roboto', sans-serif; background-color: var(--cor-fundo); color: var(--cor-texto); margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        header { width: 100%; text-align: center; padding: 20px 0; background-color: #000; position: fixed; top: 0; left: 0; z-index: 1000; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); }
        header img { max-width: 200px; }
        .main-content { margin-top: 100px; width: 90%; max-width: 800px; flex-grow: 1; }
        h1 { color: var(--cor-secundaria); font-weight: 700; font-size: 2.5rem; text-align: center; margin-bottom: 40px; }
        
        .confirmation-container { background-color: #fff; padding: 40px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); display: flex; flex-direction: column; align-items: center; text-align: center; }
        
        /* Box de Informa√ß√£o */
        .info-box { background-color: #fff3cd; color: #856404; border: 1px solid #ffeeba; padding: 20px; border-radius: 5px; margin-bottom: 30px; width: 100%; box-sizing: border-box; }
        .info-box h2 { color: #856404; margin-top: 0; font-size: 1.8rem; }
        .info-box p { font-size: 1.1rem; }

        /* Campos de Preenchimento */
        .input-fields { width: 100%; margin-bottom: 30px; text-align: left; }
        .input-fields label { display: block; font-weight: bold; margin-bottom: 5px; color: var(--cor-secundaria); }
        .input-fields input, .input-fields select { 
            width: 100%; 
            padding: 10px; 
            margin-bottom: 15px; 
            border: 1px solid var(--cor-borda); 
            border-radius: 4px; 
            box-sizing: border-box; 
        }

        /* Tabela de Resumo */
        .summary-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
        .summary-table th, .summary-table td { border: 1px solid var(--cor-borda); padding: 12px 15px; text-align: left; }
        .summary-table th { background-color: #f1f1f1; color: var(--cor-secundaria); font-weight: bold; }
        .summary-table .total-row th, .summary-table .total-row td { background-color: var(--cor-primaria); color: #fff; font-size: 1.2rem; font-weight: bold; }
        
        /* Se√ß√£o de A√ß√µes */
        .pix-section { border-top: 2px solid var(--cor-destaque); padding-top: 30px; width: 100%; }
        
        /* Bot√£o Principal de A√ß√£o (Pagar) */
        .btn-action-main {
            display: block; 
            width: 100%; 
            padding: 18px; 
            font-size: 1.3rem; 
            font-weight: bold; 
            color: #fff; 
            background-color: var(--cor-mpago); 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: background-color 0.3s ease; 
            text-decoration: none; 
            text-align: center; 
            box-sizing: border-box; 
            margin: 25px 0 15px 0; 
        }
        .btn-action-main:hover { background-color: #007bbd; }
        .btn-action-main.pix-direto { background-color: var(--cor-pix-direto); }
        .btn-action-main.pix-direto:hover { background-color: #218838; }

        /* Bot√£o do WhatsApp (Envio de Comprovante) */
        .whatsapp-btn { 
            display: block; 
            width: 100%; 
            padding: 15px; 
            font-size: 1.2rem; 
            font-weight: bold; 
            color: #fff; 
            background-color: var(--cor-whatsapp); 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            transition: background-color 0.3s ease; 
            text-decoration: none; 
            text-align: center; 
            box-sizing: border-box; 
            margin-top: 20px; 
            pointer-events: none; 
            opacity: 0.5;
        }
        .whatsapp-btn.enabled {
            pointer-events: auto;
            opacity: 1;
        }
        .whatsapp-btn.enabled:hover { background-color: #1DA851; }

        /* Detalhes do PIX Direto */
        #pix-direto-details { 
            display: none; 
            margin-top: 20px; 
            padding-top: 15px; 
            border-top: 1px solid #ccc; 
            background-color: #f1f8ff; 
            padding: 20px; 
            border-radius: 8px;
        }
        #pix-direto-details h3 { color: var(--cor-primaria); margin-top: 0; }
        
        /* Bot√µes de Copia */
        .copy-button {
            background-color: var(--cor-copia);
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        .copy-button:hover {
            background-color: #5a6268;
        }
        .qrcode-container { text-align: center; margin-top: 20px; }
        .qrcode-container img { max-width: 200px; border: 1px solid #ccc; padding: 5px; }

        .footer { margin-top: auto; padding: 20px 0; width: 100%; text-align: center; font-size: 0.9rem; color: #6c757d; }

        @media (max-width: 768px) { header { padding: 15px 0; position: static; } header img { max-width: 150px; } .main-content { margin-top: 30px; width: 95%; } h1 { font-size: 2rem; margin-bottom: 20px; } .confirmation-container { padding: 20px; box-shadow: none; } .info-box h2 { font-size: 1.5rem; } .summary-table th, .summary-table td { padding: 10px; font-size: 0.95rem; } .summary-table .total-row th, .summary-table .total-row td { font-size: 1.1rem; } }
    </style>
</head>
<body>

    <header>
        <img src="../../img/arena2.png" alt="Arena Competidor Logo">
    </header>

    <div class="main-content">
       <h1>Pagamento e Confirma√ß√£o de Inscri√ß√£o</h1>
       <div class="confirmation-container">
           
           <div class="info-box">
               <h2>üëã Pr√≥ximos Passos</h2>
               <p>1. Preencha os dados do atleta e escolha o <b>Tipo de Inscri√ß√£o</b>.</p>
               <p>2. Se ainda n√£o pagou, use um dos <b>bot√µes de pagamento</b> abaixo da tabela.</p>
               <p>3. Ap√≥s o pagamento, preencha o <b>M√©todo de Pagamento</b> e clique no bot√£o <b>Enviar Comprovante pelo WhatsApp</b>.</p>
               <p style="font-weight: bold; color: var(--cor-secundaria); margin-top: 15px;">O status da sua inscri√ß√£o ser√° atualizado para <span style="color: var(--cor-alerta);">EM AN√ÅLISE</span> ap√≥s o envio do comprovante.</p>
           </div>
           
           <div class="input-fields">
                <label for="nome-atleta">Seu Nome Completo:</label>
                <input type="text" id="nome-atleta" placeholder="Nome Completo do Atleta" required>

                <label for="numero-ordem">Seu N√∫mero de Ordem (CPF, etc.):</label>
                <input type="text" id="numero-ordem" placeholder="Ex: CPF ou N√∫mero de Inscri√ß√£o" required>

                <label for="tipo-inscricao">Selecione o Tipo de Inscri√ß√£o:</label>
                <select id="tipo-inscricao">
                    <option value="90.00">Categoria (R$ 90,00)</option>
                    <option value="140.00">Categoria + Absoluto (R$ 140,00)</option>
                </select>

                <label for="metodo-pagamento">M√©todo de Pagamento Utilizado:</label>
                <select id="metodo-pagamento" required>
                    <option value="" disabled selected>Selecione um m√©todo (para comprovante)</option>
                    <option value="PIX Direto">PIX Direto (CNPJ)</option>
                    <option value="PIX Mercado Pago">PIX Mercado Pago (QR Code/Link)</option>
                    <option value="Cart√£o de Cr√©dito Mercado Pago">Cart√£o de Cr√©dito Mercado Pago</option>
                    <option value="Saldo Mercado Pago">Saldo do Mercado Pago</option>
                    <option value="Boleto Mercado Pago">Boleto Mercado Pago</option>
                </select>
           </div>
           
           <table class="summary-table">
               <thead>
                   <tr>
                       <th>Descri√ß√£o</th>
                       <th>Valor</th>
                   </tr>
               </thead>
               <tbody>
                   <tr>
                       <td id="linha-categoria-desc">Inscri√ß√£o (Categoria + Peso)</td>
                       <td id="linha-categoria-valor">R$ 90,00</td>
                   </tr>
                   <tr id="linha-absoluto" style="display:none;">
                       <td>Absoluto</td>
                       <td id="linha-absoluto-valor">R$ 50,00</td>
                   </tr>
                   <tr class="total-row">
                       <th>Total a Pagar</th>
                       <td id="valor-total">R$ 90,00</td>
                   </tr>
               </tbody>
           </table>
           
           <a href="#" target="_blank" id="btn-pagar-agora" class="btn-action-main">
               Pagar R$ 90,00 com Mercado Pago (Cart√£o/PIX c/ Taxa)
           </a>
           <p style="font-size: 0.85rem; color: #888; margin-top: -10px;">
               *Se optar por PIX Direto (sem taxa), use o bot√£o abaixo.
           </p>

           <button id="btn-toggle-pix-direto" class="btn-action-main pix-direto" style="background-color: var(--cor-pix-direto); font-size: 1.1rem; padding: 15px; margin-top: 0;">
               Pagar R$ 90,00 com PIX Direto (Sem Taxa)
           </button>
           
           <div id="pix-direto-details">
                <div id="pix-info">
                   <h3>Informa√ß√µes PIX Direto (CNPJ)</h3>
                   <p>Use o Copia e Cola, ou o QR Code. O valor a ser pago deve ser o mesmo da tabela acima (<span id="pix-valor-info" style="font-weight: bold;">R$ 90,00</span>).</p>
                   
                   <p><strong>Chave Pix:</strong> <span id="chave-pix-cnpj">62.810.446/0001-39</span> (CNPJ)</p>
                   <button id="btn-copy-chave" class="copy-button">Copiar Chave PIX (CNPJ)</button>
                   
                   <p style="margin-top: 15px;"><strong>Identifica√ß√£o:</strong> 62.810.446 VALTER SILVA BRASIL</p>
                </div>
               
               <div class="qrcode-container">
                   <h4>Escaneie o QR Code</h4>
                   <img id="pix-qrcode-img" src="../../img/IMG_5467.jpg" alt="PIX QR Code" style="max-width: 200px;">
                   
                   <input type="hidden" id="pix-copia-cola-code" value="00020126360014br.gov.bcb.pix0114628104460001395204000053039865802BR592462.810.446 VALTER SILVA 6009Sao Paulo610901227-20062240520daqr27030924361048376304C2FA">
                   
                   <button id="btn-copy-qrcode" class="copy-button">Copiar PIX Copia e Cola</button>
                   <p style="font-size: 0.8rem; color: #cc0000; margin-top: 5px;">*Aten√ß√£o: Voc√™ precisar√° digitar o valor exato no seu App banc√°rio.</p>
               </div>
           </div>

           <a id="whatsapp-link" href="#" target="_blank" class="whatsapp-btn">
               Preencha os campos para enviar o Comprovante (Ap√≥s o Pagamento)
           </a>
           
       </div>
    </div>

    <div class="footer">
        &copy; 2025 Arena Competidor. Todos os direitos reservados.
    </div>

    <script>
        const nomeAtletaInput = document.getElementById('nome-atleta');
        const numeroOrdemInput = document.getElementById('numero-ordem');
        const tipoInscricaoSelect = document.getElementById('tipo-inscricao');
        const metodoPagamentoSelect = document.getElementById('metodo-pagamento'); 
        const linhaAbsoluto = document.getElementById('linha-absoluto');
        const linhaCategoriaDesc = document.getElementById('linha-categoria-desc');
        const linhaCategoriaValor = document.getElementById('linha-categoria-valor');
        const linhaAbsolutoValor = document.getElementById('linha-absoluto-valor');
        const valorTotalElement = document.getElementById('valor-total');
        const whatsappLink = document.getElementById('whatsapp-link');

        const btnPagarAgora = document.getElementById('btn-pagar-agora');
        const btnTogglePixDireto = document.getElementById('btn-toggle-pix-direto');
        const pixDiretoDetails = document.getElementById('pix-direto-details');
        const pixValorInfo = document.getElementById('pix-valor-info');
        const btnCopyChave = document.getElementById('btn-copy-chave');
        const chavePixCnpj = document.getElementById('chave-pix-cnpj');
        const btnCopyQrcode = document.getElementById('btn-copy-qrcode');
        const pixCopiaEColaCode = document.getElementById('pix-copia-cola-code');

        
        // Mapeamento dos links do Mercado Pago (c/ Taxa) - ATUALIZADO
        const mercadoPagoLinks = {
            90.00: 'https://mpago.la/1jChcci', // Novo link para R$ 90,00
            140.00: 'https://mpago.la/1qbtrgj'  // Novo link para R$ 140,00
        };

        // --- FUN√á√ÉO PARA ATUALIZAR A TABELA E OS BOT√ïES ---
        function atualizarDados() {
            const valorTotal = parseFloat(tipoInscricaoSelect.value);
            const nome = nomeAtletaInput.value.trim();
            const ordem = numeroOrdemInput.value.trim();
            const metodo = metodoPagamentoSelect.value;
            const valorFormatado = valorTotal.toFixed(2).replace('.', ',');
            
            let catValor = 90.00; // Novo valor base
            let absolutoValor = 50.00; // 140 - 90 = 50
            let catDesc = 'Inscri√ß√£o (Categoria + Peso)';

            // 1. Atualizar Tabela de Resumo
            if (Math.abs(valorTotal - 140.00) < 0.01) { // R$ 140
                catValor = 90.00;
                absolutoValor = 50.00;
                catDesc = 'Inscri√ß√£o (Categoria + Peso)';
                linhaAbsoluto.style.display = 'table-row';
            } else { // R$ 90 (Default)
                catValor = 90.00;
                absolutoValor = 0.00;
                catDesc = 'Inscri√ß√£o (Categoria + Peso)';
                linhaAbsoluto.style.display = 'none';
            }
            
            // O valor do Absoluto √© sempre a diferen√ßa, mas vamos manter a exibi√ß√£o simplificada
            // Para R$ 140: Categoria (R$ 90,00) + Absoluto (R$ 50,00)
            linhaCategoriaDesc.innerText = catDesc;
            linhaCategoriaValor.innerText = `R$ ${catValor.toFixed(2).replace('.', ',')}`;
            linhaAbsolutoValor.innerText = `R$ ${absolutoValor.toFixed(2).replace('.', ',')}`;
            
            valorTotalElement.innerText = `R$ ${valorFormatado}`;
            pixValorInfo.innerText = `R$ ${valorFormatado}`; // Atualiza o valor na se√ß√£o PIX
            
            // 2. Atualizar Bot√µes de A√ß√£o de Pagamento
            
            // Bot√£o Mercado Pago (A√ß√£o Principal)
            const linkMP = mercadoPagoLinks[valorTotal];
            const inscricaoDesc = tipoInscricaoSelect.options[tipoInscricaoSelect.selectedIndex].text;
            
            if (linkMP) {
                btnPagarAgora.href = linkMP;
                btnPagarAgora.innerText = `Pagar R$ ${valorFormatado} com Cart√£o/PIX Mercado Pago (${inscricaoDesc} - c/ Taxa)`;
                btnPagarAgora.style.display = 'block';
            } else {
                btnPagarAgora.href = '#';
                btnPagarAgora.innerText = `Valor R$ ${valorFormatado} - Link Mercado Pago Indispon√≠vel`;
                btnPagarAgora.style.display = 'none'; 
            }

            // Bot√£o PIX Direto (Toggle)
            btnTogglePixDireto.innerText = `Pagar R$ ${valorFormatado} com PIX Direto (Sem Taxa)`;
            
            // 3. Atualizar Link do WhatsApp (Todos os campos obrigat√≥rios)
            if (nome && ordem && metodo) {
                // Habilitar o bot√£o
                whatsappLink.classList.add('enabled');
                whatsappLink.innerText = 'Envie o Comprovante e Detalhes (Ap√≥s o Pagamento)';
                
                // Mensagem personalizada para o WhatsApp
                const mensagem = 
                    `‚úÖ COMPROVANTE DE PAGAMENTO ENVIADO\n\n` +
                    `‚û°Ô∏è Evento: SENOGI ETAPA CAIC√ì\n` +
                    `üë§ Atleta: ${nome}\n` +
                    `üÜî Ordem/Inscri√ß√£o: ${ordem}\n` +
                    `üí∞ Valor Pago: R$ ${valorFormatado}\n` +
                    `üí≥ M√©todo: ${metodo}\n` +
                    `üìù Detalhes: ${inscricaoDesc}`;
                    
                const baseText = encodeURIComponent(mensagem);
                const numeroOrg = '5584987513740'; 
                
                whatsappLink.href = `https://api.whatsapp.com/send?phone=${numeroOrg}&text=${baseText}`;
            } else {
                // Desabilitar o bot√£o
                whatsappLink.classList.remove('enabled');
                whatsappLink.href = '#';
                whatsappLink.innerText = 'Preencha todos os campos para enviar o Comprovante (Ap√≥s o Pagamento)';
            }
        }

        // --- L√≥gica para mostrar/esconder PIX Direto ---
        btnTogglePixDireto.addEventListener('click', () => {
            const isVisible = pixDiretoDetails.style.display === 'block';
            if (isVisible) {
                pixDiretoDetails.style.display = 'none';
                btnTogglePixDireto.innerText = btnTogglePixDireto.innerText.replace(' (Ocultar Detalhes)', '');
            } else {
                pixDiretoDetails.style.display = 'block';
                btnTogglePixDireto.innerText = btnTogglePixDireto.innerText + ' (Ocultar Detalhes)';
                // Scroll suave para a se√ß√£o PIX
                pixDiretoDetails.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });

        // --- L√≥gica para Copiar Chave PIX CNPJ (Chave Principal) ---
        btnCopyChave.addEventListener('click', () => {
            const textToCopy = chavePixCnpj.innerText;
            navigator.clipboard.writeText(textToCopy).then(() => {
                const originalText = btnCopyChave.innerText;
                btnCopyChave.innerText = 'Chave Copiada! (PIX CNPJ)';
                setTimeout(() => {
                    btnCopyChave.innerText = originalText;
                }, 2000);
            }).catch(err => {
                alert('Erro ao copiar a chave PIX: ' + err);
            });
        });
        
        // --- L√≥gica para Copiar PIX Copia e Cola (String Completa) ---
        btnCopyQrcode.addEventListener('click', () => {
            const textToCopy = pixCopiaEColaCode.value; // Pega o valor do input hidden
            navigator.clipboard.writeText(textToCopy).then(() => {
                const originalText = btnCopyQrcode.innerText;
                btnCopyQrcode.innerText = 'Copiado! Cole no seu App Banc√°rio.';
                setTimeout(() => {
                    btnCopyQrcode.innerText = originalText;
                }, 2000);
            }).catch(err => {
                alert('Erro ao copiar o c√≥digo PIX Copia e Cola: ' + err);
            });
        });


        // --- EVENT LISTENERS ---
        nomeAtletaInput.addEventListener('input', atualizarDados);
        numeroOrdemInput.addEventListener('input', atualizarDados);
        tipoInscricaoSelect.addEventListener('change', atualizarDados);
        metodoPagamentoSelect.addEventListener('change', atualizarDados); 
        
        // Chamada inicial
        document.addEventListener('DOMContentLoaded', atualizarDados);
    </script>
</body>
</html>
